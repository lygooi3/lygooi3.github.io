<html>
 
  <head>
    <link rel="icon" href="images/waterdrop.jpg">
    <meta charset="UTF-8">
    <title>CTS-2020</title>
    <link rel="stylesheet" href="style.css">
  </head>

    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script> 
    <script src='https://www.google.com/jsapi'></script>
    <script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/fusioncharts.js"></script>
    <script type="text/javascript" src="https://cdn.fusioncharts.com/fusioncharts/latest/themes/fusioncharts.theme.fusion.js"></script>
    <script src='CoupledTS.js'></script>
    <script type="text/javascript">
      google.charts.load('current', {'packages':['gauge']});
      google.charts.setOnLoadCallback(drawGauge);
      FusionCharts.ready(function(){
        var chartObj = new FusionCharts(chart1Config);
        var chartObj2 = new FusionCharts(chart2Config);
		    chartObj.render();
        chartObj2.render();
      });
    </script>

   
  <body>
    <header>  
      <h1>Coupled Tank System</h1>
      <h4>Made by: Gooi Liang Yu</h4>
    </header>

    <section class="whole">
      <table class ="table">
        <tr>
          <td><h2>Tuning Parameters</h2></td>
          <td colspan="2"><h2>Output Parameters</h2></td>
        </tr>

        <tr>
          <td rowspan="5" valign="top">
            <table class="table tune">
              <tr><td bgcolor ="#4154fc"><label>Setpoint</label></td></tr>
              <tr style ="border-spacing: 0, 1em;"><td><input type="number" id="SetP" min="0" max="20"  placeholder="Enter here"></td></tr>
              <tr><td bgcolor ="#4154fc"><label>Proportional Gain (Kp)</label></td></tr>
              <tr style ="border-spacing: 0, 1em;"><td><input type="number" id="PGain" placeholder="Enter here"></td></tr>
              <tr><td bgcolor ="#4154fc"><label>Integral Gain (Ki)</label></td></tr>
              <tr style ="border-spacing: 0, 1em;"><td><input type="number" id="IGain" placeholder="Enter here"></td></tr>
              <tr><td bgcolor ="#4154fc"><label>Derivative Gain (Kd)</label></td></tr>
              <tr style ="border-spacing: 0, 1em;"><td><input type="number" id="DGain" placeholder="Enter here"></td></tr>  
        
              <tr><td><button onclick="return tuningKs()" >Submit</button></td></tr>
              <tr><td><button onclick="downloadFile()">Download Data</button></td></tr>
              <tr><td><button onclick="clearData()">Clear Data</button></td></tr>

              <tr><td height = "20"></td></tr>
              <tr><td bgcolor ="#2000ad"><label>Current Parameter</label></td></tr>
              <tr><td bgcolor ="#2000ad"><label>Setpoint = </label><label id="CurrentSetP"></label></td></tr>
              <tr><td bgcolor ="#2000ad"><label>Kp = </label><label id="CurrentPGain"></label></td></tr>
              <tr><td bgcolor ="#2000ad"><label>Ki = </label><label id="CurrentIGain"></label></td></tr>
              <tr><td bgcolor ="#2000ad"><label>Kd = </label><label id="CurrentDGain"></label></td></tr>
              <tr><td height = "20"></td></tr>

              <tr>
                <td align="center"><button class ="round" onclick="startSys()"><img class="round" id = "OnOff"></button></td>
              </tr>

              <tr>
                <td align="center"><button class ="round" onclick="stopSys()" ><img class="round" src="images/StopButton.jpg"></button></td>
              </tr>
              
              <tr>
                <td align="right"><a href="https://www.freepik.com/free-photos-vectors/circle">Circle vector created by ibrandify <br> www.freepik.com</a></td>
              </tr>
            </table>
          </td>
          <td><div style="border: 1px solid #cccccc;" id="chart-container1"></div></td>
          <td><div style="border: 1px solid #cccccc;" id="chart-container2"></div></td>
        </tr>

        <tr>
          <td><iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/1011568/charts/1?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&title=Tank+1&type=line&xaxis=Time&yaxis=Water+Level+%28+cm+%29&yaxismax=30&yaxismin=0&api_key=ZN6JY39YGYW6V9BQ"></iframe></td>
          <td><iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/1011568/charts/2?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&title=Tank+2&type=line&xaxis=Time&yaxis=Water+Level+%28+cm+%29&yaxismax=30&yaxismin=0&api_key=ZN6JY39YGYW6V9BQ"></iframe></td>
        </tr>

        <tr>
          <td colspan="2"><h2>Input Parameters</h2></td>
        </tr>

        <tr>
          <td><div class="chart" style="border: 1px solid #cccccc;" id="chart-gauge3"></div></td>
          <td><div class="chart" style="border: 1px solid #cccccc;" id="chart-gauge4"></div></td>
        </tr>

        <tr>
          <td><iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/1011568/charts/3?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&title=Flow+Rate&type=line&xaxis=Time&yaxis=L+%2F+min&yaxismax=3&yaxismin=0&api_key=ZN6JY39YGYW6V9BQ"></iframe></td>
          <td><iframe width="450" height="260" style="border: 1px solid #cccccc;" src="https://thingspeak.com/channels/1011568/charts/4?bgcolor=%23ffffff&color=%23d62020&dynamic=true&results=60&title=Input+Voltage&type=line&xaxis=Time&yaxis=Volts&yaxismax=10&yaxismin=0&api_key=ZN6JY39YGYW6V9BQ"></iframe></td>
        </tr>

      </table>
    </section>
  </body>
</html>
